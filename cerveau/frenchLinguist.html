<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="Generator" content="Kate, the KDE Advanced Text Editor" />
<title>frenchLinguist.py</title>
</head>
<body>
<pre>
<span style="font-style: italic;color: #808080;"># -*- coding: iso-8859-1 -*-</span>

<span style="font-style: italic;color: #808080;">####</span>
<span style="font-style: italic;color: #808080;"># Copyright (C) 2006, 2007 Kim Gerdes</span>
<span style="font-style: italic;color: #808080;"># kim AT gerdes.fr</span>
<span style="font-style: italic;color: #808080;">#</span>
<span style="font-style: italic;color: #808080;"># This program is free software; you can redistribute it and/or</span>
<span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># modify it under the terms of the GNU General Public License</span>
<span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># as published by the Free Software Foundation; either version 2</span>
<span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># of the License, or (at your option) any later version.</span>
<span style="font-style: italic;color: #808080;">#</span>
<span style="font-style: italic;color: #808080;"># This script is distributed in the hope that it will be useful,</span>
<span style="font-style: italic;color: #808080;"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span style="font-style: italic;color: #808080;"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE</span>
<span style="font-style: italic;color: #808080;"># See the GNU General Public License (www.gnu.org) for more details.</span>
<span style="font-style: italic;color: #808080;">#</span>
<span style="font-style: italic;color: #808080;"># You can retrieve a copy of the GNU General Public License</span>
<span style="font-style: italic;color: #808080;"># from http://www.gnu.org/.  For a copy via US Mail, write to the</span>
<span style="font-style: italic;color: #808080;">#     Free Software Foundation, Inc.</span>
<span style="font-style: italic;color: #808080;">#     59 Temple Place - Suite 330,</span>
<span style="font-style: italic;color: #808080;">#     Boston, MA  02111-1307</span>
<span style="font-style: italic;color: #808080;">#     USA</span>
<span style="font-style: italic;color: #808080;">####</span>

<span style="color: #ff00ff;">import</span><span style="color: #000000;"> string</span>
<span style="color: #ff00ff;">import</span><span style="color: #000000;"> lefffDB</span>
<span style="font-style: italic;color: #808080;">##from random import choice</span>
<span style="color: #ff00ff;">import</span><span style="color: #000000;"> re</span>

<span style="font-weight: bold;color: #000000;">class</span><span style="color: #000000;"> FrenchLinguist</span><span style="color: #ff00ff;">:</span>

<span style="color: #000000;">    dic </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> lefffDB.Lefff</span><span style="color: #ff00ff;">()</span>
<span style="color: #000000;">    dataBaseStatus </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> dic.connect</span><span style="color: #ff00ff;">()</span>
<span style="color: #000000;">    motsPasApresQue </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">[</span><span style="color: #dd0000;">"mais"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"enfin"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"bon"</span><span style="color: #ff00ff;">]</span>
<span style="color: #000000;">    listeClitiques</span><span style="color: #ff00ff;">=[</span><span style="color: #dd0000;">"je"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"j"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"me"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"m"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"tu"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"il"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"ils"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"elles"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"le"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"l"</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #dd0000;">"la"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"ne"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"n"</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #dd0000;">"te"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"t"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"en"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"y"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"lui"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"se"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"s"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"nous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"leur"</span><span style="color: #ff00ff;">]</span>
<span style="color: #000000;">    dicClitPersSource </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">{</span><span style="color: #0000ff;">1</span><span style="color: #ff00ff;">:[</span><span style="color: #dd0000;">"je"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"j"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"nous"</span><span style="color: #ff00ff;">]</span><span style="color: #000000;">,</span><span style="color: #0000ff;">2</span><span style="color: #ff00ff;">:[</span><span style="color: #dd0000;">"tu"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous"</span><span style="color: #ff00ff;">]}</span>
<span style="font-style: italic;color: #808080;">##    dicClitPersCible = {1:"je",2:"vous"}</span>
<span style="color: #000000;">    listeElis </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">[</span><span style="color: #dd0000;">"je"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"te"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"me"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"se"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"le"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"la"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"ne"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"que"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"ce"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"de"</span><span style="color: #ff00ff;">]</span>
<span style="color: #000000;">    </span>
<span style="color: #000000;">    remplacements12 </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">[(</span><span style="color: #dd0000;">"je vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous me"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"je ne vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous ne me"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"vous vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"je me"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"vous ne vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"je ne me"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"nous vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous me"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"nous ne vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous ne me"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"je me"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous vous"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"je ne me"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous ne vous"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"je"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"me"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"mon"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"votre"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"mes"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vos"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span>
<span style="color: #000000;">                        </span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"ma"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"votre"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"vous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"je"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">,</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"votre"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"ma"</span><span style="color: #ff00ff;">)]</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;"># attention : l'ordre de ces entrÃ©es est important - on remplace d'abord les premiÃ¨res</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;">#               entrÃ©es et les autres seulement quand les premiÃ¨res ne se sont pas</span>
<span style="color: #000000;">    </span><span style="font-style: italic;color: #808080;">#               appliquÃ©es !</span>
<span style="color: #000000;">    </span>
<span style="color: #000000;">    </span>
<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> changePersonne</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,liste</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">""" fonction qui remplace les verbes par la personne contraire</span>
<span style="font-style: italic;color: #808080;">            (la personne de l'interlocuteur ou du locuteur respectivement)</span>
<span style="font-style: italic;color: #808080;">            et les pronoms qui vont avec.</span>
<span style="font-style: italic;color: #808080;">            - c'est un peu un bricolage pas trÃ¨s Ã©lÃ©gant - il n'y a rien</span>
<span style="font-style: italic;color: #808080;">            d'universel ou de profondement linguistique dans cette fonction...</span>
<span style="font-style: italic;color: #808080;">            (le plus difficile est de remplacer la suite de pronoms une fois</span>
<span style="font-style: italic;color: #808080;">            et ne pas une deuxiÃ¨me fois, mÃªme si la liste de remplacment le</span>
<span style="font-style: italic;color: #808080;">            permettait...)</span>
<span style="font-style: italic;color: #808080;">        """</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">#  on trouve les verbes Ã  la 1Ã¨re personne qu'il faudra remplacer</span>
<span style="color: #000000;">        indexVerbes1 </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.candidatsVerbaux</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">.dicClitPersSource</span><span style="color: #ff00ff;">[</span><span style="color: #0000ff;">1</span><span style="color: #ff00ff;">]</span><span style="color: #000000;">,liste</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># et on les remplace</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> i </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> indexVerbes1</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            liste</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">i</span><span style="color: #ff00ff;">]</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.dic.changePersonne</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">liste</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">i</span><span style="color: #ff00ff;">]</span><span style="color: #000000;">,</span><span style="color: #0000ff;">1</span><span style="color: #000000;">,</span><span style="color: #0000ff;">2</span><span style="color: #ff00ff;">)</span>

<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">#  on trouve les verbes Ã  la 2e personne qu'il faudra remplacer</span>
<span style="color: #000000;">        indexVerbes2 </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.candidatsVerbaux</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">.dicClitPersSource</span><span style="color: #ff00ff;">[</span><span style="color: #0000ff;">2</span><span style="color: #ff00ff;">]</span><span style="color: #000000;">,liste</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># et on les remplace (si ce n'est pas dÃ©jÃ  le rÃ©sultat d'un remplacement)</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> i </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> indexVerbes2</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> i </span><span style="font-weight: bold;color: #000000;">not</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> indexVerbes1</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">                liste</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">i</span><span style="color: #ff00ff;">]</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.dic.changePersonne</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">liste</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">i</span><span style="color: #ff00ff;">]</span><span style="color: #000000;">,</span><span style="color: #0000ff;">2</span><span style="color: #000000;">,</span><span style="color: #0000ff;">1</span><span style="color: #000000;">,pluriel</span><span style="color: #ff00ff;">=</span><span style="color: #008000;">False</span><span style="color: #ff00ff;">)</span>

<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># on passe aux pronoms :</span>
<span style="color: #000000;">        nouvelleListe</span><span style="color: #ff00ff;">=[</span><span style="color: #dd0000;">""</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> mot </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> liste</span><span style="color: #ff00ff;">]</span>

<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> cle,valeur </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.remplacements12</span><span style="color: #ff00ff;">:</span><span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># chaque remplacement</span>
<span style="color: #000000;">            listeMotsAvant </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> cle.split</span><span style="color: #ff00ff;">()</span>
<span style="color: #000000;">            listeMotsApres </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> valeur.split</span><span style="color: #ff00ff;">()</span>
<span style="color: #000000;">            neuf </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.remplaceSousListe</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">listeMotsAvant,listeMotsApres,liste</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># copier tout ce qui est nouveau s'il n'y a pas dÃ©jÃ  un remplacement</span>
<span style="color: #000000;">            </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> index, mot </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> enumerate</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">liste</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">                </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> nouvelleListe</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">]</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">==</span><span style="color: #000000;"> </span><span style="color: #dd0000;">""</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">and</span><span style="color: #000000;"> mot </span><span style="color: #ff00ff;">!=</span><span style="color: #000000;"> neuf</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">]:</span>
<span style="color: #000000;">                    nouvelleListe</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">]</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> neuf</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">]</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># remplacer les mots qui n'ont pas Ã©tÃ© touchÃ©s :</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> index,mot </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> enumerate</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">nouvelleListe</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">            </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> mot </span><span style="color: #ff00ff;">==</span><span style="color: #000000;"> </span><span style="color: #dd0000;">""</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">                nouvelleListe</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">]=</span><span style="color: #000000;">liste</span><span style="color: #ff00ff;">[</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">]</span>

<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> nouvelleListe</span>
<span style="color: #000000;">        </span>
<span style="color: #000000;">        </span>

<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> candidatsVerbaux</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,liste2cles,liste2mots</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">""" rend une liste d'indices de verbes qui suivent certaines clÃ©s,</span>
<span style="font-style: italic;color: #808080;">            par exemple 'je' ou 'j'.</span>
<span style="font-style: italic;color: #808080;">            par exemple, pour la input</span>
<span style="font-style: italic;color: #808080;">            "hier, je ne lui en ai rien donnÃ©, et j'en suis fier"</span>
<span style="font-style: italic;color: #808080;">            (nettoyÃ©e et splittÃ©e)</span>
<span style="font-style: italic;color: #808080;">            il faut rendre [6,12]</span>
<span style="font-style: italic;color: #808080;">        """</span>

<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># drapeau pour nous indiquer quand on est en train de passer au dessus</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># des clitiques :</span>
<span style="color: #000000;">        alerte </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">False</span>
<span style="color: #000000;">        liste </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">[]</span><span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># contiendra les indices des verbes Ã  regarder</span>

<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> index,mot </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> enumerate</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">liste2mots</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">            </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> alerte </span><span style="font-weight: bold;color: #000000;">and</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">(</span><span style="color: #000000;">mot </span><span style="font-weight: bold;color: #000000;">not</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.listeClitiques</span><span style="color: #ff00ff;">)</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">                </span><span style="font-style: italic;color: #808080;"># si je suis en train de passer sur les clitiques</span>
<span style="color: #000000;">                </span><span style="font-style: italic;color: #808080;"># et soudainement, ce n'est plus un clitique, alors</span>
<span style="color: #000000;">                </span><span style="font-style: italic;color: #808080;"># je suppose que j'ai trouvÃ© le verbe Ã  traiter</span>
<span style="color: #000000;">                liste.append</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">index</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">                alerte </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">False</span>
<span style="color: #000000;">            </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> mot </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> liste2cles</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">                alerte </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">True</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> liste</span>

<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> decontracte</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,chaine</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> clitique </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.listeElis</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># pour chaque clitique qui pourrait Ãªtre Ã©lisÃ©</span>

<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># crÃ©e une cdc avec la forme Ã©lisÃ©e suivi d'une lettre quelconque</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># par exemple " qu'(\w)"</span>
<span style="color: #000000;">            e </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> clitique</span><span style="color: #ff00ff;">[:-</span><span style="color: #0000ff;">1</span><span style="color: #ff00ff;">]</span>
<span style="color: #000000;">            regsSourceString </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">e</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">"'([Ã©ÃªÃ¨Ã¹Ã»Ã®Ã´\w])"</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># en faire une expression rÃ©guliÃ¨re</span>
<span style="color: #000000;">            regSourceExp </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> re.</span><span style="color: #800000;">compile</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">regsSourceString</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># crÃ©e une cdc de remplacement</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># par exemple " que \1"</span>
<span style="color: #000000;">            regsCibleString </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">r"\1"</span>
<span style="color: #000000;">            regsCibleString </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">clitique</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;"> regsCibleString</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># ici se fait le vrai travail : ,re.UNICODE</span>
<span style="color: #000000;">            chaine </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">(</span><span style="color: #000000;">regSourceExp.sub</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">regsCibleString,</span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">chaine</span><span style="color: #ff00ff;">))[</span><span style="color: #0000ff;">1</span><span style="color: #ff00ff;">:]</span>

<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> chaine</span>
<span style="color: #000000;">        </span>
<span style="color: #000000;">        </span>


<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> beautifier</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,chaine</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">""" fonction pour printer des lignes qui ont Ã©tÃ© travaillÃ©es</span>
<span style="font-style: italic;color: #808080;">            et oÃ¹ il est donc possible qu'il manque certaines Ã©lisions</span>
<span style="font-style: italic;color: #808080;">        """</span>
<span style="color: #000000;">	</span><span style="font-style: italic;color: #808080;">#print "___"+chaine</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># posttraitement :</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># pour l'instant seulement des Ã©lisions</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> clitique </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.listeElis</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># pour chaque clitique Ã  Ã©liser</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#print clitique</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># crÃ©e une cdc avec ce clitique plus une voyelle</span>
<span style="color: #000000;">            regsSourceString </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">"[ ']"</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">clitique</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">" ([aeiouyÃ©ÃªÃ¨Ã¹Ã»Ã®Ã´])"</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#uStr = unicode("ç°ãªãã£ã¼", "utf-8")</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#regsSourceString = unicode(regsSourceString,"iso-8859-1")</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#regsSourceString = regsSourceString.decode("iso-8859-1")</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># en faire une expression rÃ©guliÃ¨re</span>
<span style="color: #000000;">            regSourceExp </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> re.</span><span style="color: #800000;">compile</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">regsSourceString</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># crÃ©e une cdc de remplacement</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># (guillemet simple suivi de ce qu'on a trouvÃ© en premier :</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;">#   donc la voyelle)</span>
<span style="color: #000000;">            regsCibleString </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">r"'\1"</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># ajouter le clitique sans son dernier caractÃ¨re devant</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># cela part de l'idÃ©e qu'on n'a toujours qu'un caractÃ¨re</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># Ã  enlÃ©ver</span>
<span style="color: #000000;">            regsCibleString </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">clitique</span><span style="color: #ff00ff;">[:-</span><span style="color: #0000ff;">1</span><span style="color: #ff00ff;">]+</span><span style="color: #000000;">regsCibleString</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#regsCibleString = unicode(regsCibleString,"iso-8859-1")</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#regsCibleString = regsCibleString.decode("iso-8859-1")</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#regsCibleString = unicode(regsCibleString)</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># ici se fait le vrai travail :</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># Ã  l'aide de l'expression rÃ©guliÃ¨re source,</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># nous remplaÃ§ons cette expression par le cible dans</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># la chaÃ®ne Ã  traiter content.decode(encoding)).encode(encoding)</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#encoding = "iso-8859-1"</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#chaine = unicode(" "+chaine,"utf-8")</span>
<span style="color: #000000;">	    </span><span style="font-style: italic;color: #808080;">#.decode(encoding).encode(encoding)</span>
<span style="color: #000000;">            chaine </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">(</span><span style="color: #000000;">regSourceExp.sub</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">regsCibleString,</span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">chaine</span><span style="color: #ff00ff;">))[</span><span style="color: #0000ff;">1</span><span style="color: #ff00ff;">:]</span>

<span style="color: #000000;">        chaine </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> re.sub</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">" +"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">" "</span><span style="color: #000000;">,chaine</span><span style="color: #ff00ff;">)</span>

<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># on recode pour que Ã§a s'affiche bien</span>
<span style="font-style: italic;color: #808080;">##        chaine = self.recode(chaine)</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> chaine</span>
<span style="color: #000000;">        </span>
<span style="color: #000000;">        </span>


<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> recode</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,chaine</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># nÃ©cessaire pour windows,</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># Ã  enlever quand on est en ligne de commande de linux</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># cela sert Ã  choisir le bon encodage si possible pour que</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># les lettres accentuÃ©es restent toujours lisibles</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">try</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            chaine </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">unicode</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">chaine,</span><span style="color: #dd0000;">"iso-8859-1"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">.encode</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">'cp437'</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">except</span><span style="color: #000000;"> UnicodeEncodeError</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            chaine </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">unicode</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">chaine,</span><span style="color: #dd0000;">"cp437"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;">.encode</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">'iso-8859-1'</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> chaine</span>

<span style="color: #000000;">        </span>
<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> remplaceSousListe</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,sousListeAvant,sousListeApres,liste</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">""" fonction utilise un double underscore '__' et aucun mot des</span>
<span style="font-style: italic;color: #808080;">            listes peut donc contenir ces deux caratÃ¨res Ã  la suite</span>
<span style="font-style: italic;color: #808080;">            c'est ainsi qu'on peut avoir recours aux expressions rÃ©guliÃ¨res</span>
<span style="font-style: italic;color: #808080;">            pour ne pas refaire le mÃªme travail pour les listes</span>
<span style="font-style: italic;color: #808080;">        """</span>

<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># on crÃ©e des chaÃ®nes de caractÃ¨res Ã  partir des listes de maniÃ¨re</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># que entre les mots (ou expressions) se trouve des caractÃ¨res uniques</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># et on a choisi "__" mais Ã§a pourrait Ãªtre n'importe quoi d'autre tant</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># que Ã§a n'apparaÃ®t pas dans les mots Ã  traiter</span>
<span style="color: #000000;">        li </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">"__"</span><span style="color: #000000;">.join</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">liste</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        av </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">"__"</span><span style="color: #000000;">.join</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">sousListeAvant</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        ap </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">"__"</span><span style="color: #000000;">.join</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">sousListeApres</span><span style="color: #ff00ff;">)</span>

<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># on utilise les regex pour remplacer</span>
<span style="color: #000000;">        res </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> re.sub</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"__"</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">av</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">"__"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"__"</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">ap</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">"__"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"__"</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">li</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">"__"</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># et on divise Ã  nouveau dans une liste</span>
<span style="color: #000000;">        resultat </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> res.split</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"__"</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># on enlÃ¨ve les vides au dÃ©but et Ã  la fin</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># (provenant des caractÃ¨res "__" au dÃ©but et Ã  la fin)</span>
<span style="color: #000000;">        resultat.pop</span><span style="color: #ff00ff;">()</span>
<span style="color: #000000;">        resultat.pop</span><span style="color: #ff00ff;">(</span><span style="color: #0000ff;">0</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;"># on rend le rÃ©sultat.</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> resultat</span>
<span style="color: #000000;">        </span>
<span style="color: #000000;">        </span>


<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> choisirBonnePhrase</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,liste2phrases</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">""" prend par dÃ©faut une phrase oÃ¹ le patient</span>
<span style="font-style: italic;color: #808080;">            parle de lui-mÃªme, sinon la derniÃ¨re</span>
<span style="font-style: italic;color: #808080;">        """</span>
<span style="color: #000000;">        bonnePhrase </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">""</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> clit </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">[</span><span style="color: #dd0000;">"je"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"nous"</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"vous"</span><span style="color: #ff00ff;">]:</span>
<span style="color: #000000;">            </span><span style="font-style: italic;color: #808080;"># pour chaque clitique qu'on sait retourner</span>
<span style="color: #000000;">            </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> phrase </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> liste2phrases</span><span style="color: #ff00ff;">:</span><span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># pour chaque phrase</span>
<span style="color: #000000;">                </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> </span><span style="color: #800000;">len</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">phrase</span><span style="color: #ff00ff;">)</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">&gt;</span><span style="color: #000000;"> </span><span style="color: #0000ff;">1</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">:</span><span style="color: #000000;">  bonnePhrase </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> phrase</span>
<span style="color: #000000;">                </span><span style="font-style: italic;color: #808080;"># si on a trouvÃ© une phrase avec un bon clitique, on s'arrÃªte</span>
<span style="color: #000000;">                </span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> clit </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> phrase</span><span style="color: #ff00ff;">:</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">break</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> bonnePhrase</span>


<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> nettoyerTexte</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,texte</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">        </span><span style="font-style: italic;color: #808080;">""" nettoie le texte en le mettant en minuscules</span>
<span style="font-style: italic;color: #808080;">            et en enlevant toute ponctuation</span>
<span style="font-style: italic;color: #808080;">        """</span>
<span style="color: #000000;">        propre </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> texte.lower</span><span style="color: #ff00ff;">()</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">for</span><span style="color: #000000;"> c </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> string.punctuation</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">"Â«Â»"</span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">            propre</span><span style="color: #ff00ff;">=</span><span style="color: #000000;">propre.replace</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">c,</span><span style="color: #dd0000;">" "</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">        </span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> propre</span>
<span style="color: #000000;">	</span>
<span style="color: #000000;">    </span><span style="font-weight: bold;color: #000000;">def</span><span style="color: #000000;"> phraseEnchassee</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">,</span><span style="color: #800000;">input</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">	    </span>
<span style="color: #000000;">	</span><span style="color: #800000;">input</span><span style="color: #000000;">.replace</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"M."</span><span style="color: #000000;">,</span><span style="color: #dd0000;">"M"</span><span style="color: #ff00ff;">)</span><span style="color: #000000;"> </span><span style="font-style: italic;color: #808080;"># pour Ã©viter qu'on coupe aprÃ¨s M. quand on divise l'input en phrases</span>
<span style="color: #000000;">	phrases </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">input</span><span style="color: #000000;">.split</span><span style="color: #ff00ff;">(</span><span style="color: #dd0000;">"."</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">	</span>
<span style="color: #000000;">	bonnePhrase </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.choisirBonnePhrase</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">phrases</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">	phraseSplit </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">.nettoyerTexte</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">bonnePhrase</span><span style="color: #ff00ff;">))</span><span style="color: #000000;">.split</span><span style="color: #ff00ff;">()</span>

<span style="color: #000000;">	</span><span style="font-style: italic;color: #808080;"># enlever des mots bizarre devant :</span>
<span style="color: #000000;">	</span><span style="font-weight: bold;color: #000000;">while</span><span style="color: #000000;"> </span><span style="color: #800000;">len</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">phraseSplit</span><span style="color: #ff00ff;">)&gt;</span><span style="color: #0000ff;">1</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">and</span><span style="color: #000000;"> phraseSplit</span><span style="color: #ff00ff;">[</span><span style="color: #0000ff;">0</span><span style="color: #ff00ff;">]</span><span style="color: #000000;"> </span><span style="font-weight: bold;color: #000000;">in</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.motsPasApresQue</span><span style="color: #ff00ff;">:</span><span style="color: #000000;"> phraseSplit.pop</span><span style="color: #ff00ff;">(</span><span style="color: #0000ff;">0</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">	phraseRemaniee </span><span style="color: #ff00ff;">=</span><span style="color: #000000;"> </span><span style="color: #dd0000;">" "</span><span style="color: #000000;">.join</span><span style="color: #ff00ff;">(</span><span style="color: #008000;">self</span><span style="color: #000000;">.changePersonne</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">phraseSplit</span><span style="color: #ff00ff;">))</span>
<span style="color: #000000;">	</span><span style="font-weight: bold;color: #000000;">if</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.dic.contientVerbe</span><span style="color: #ff00ff;">(</span><span style="color: #000000;">phraseSplit</span><span style="color: #ff00ff;">):</span>
<span style="color: #000000;">		</span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.beautifier</span><span style="color: #ff00ff;">(</span><span style="color: #000000;"> </span><span style="color: #dd0000;">" que "</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">phraseRemaniee</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">" ?"</span><span style="color: #ff00ff;">)</span>
<span style="color: #000000;">	</span><span style="font-weight: bold;color: #000000;">else</span><span style="color: #000000;"> </span><span style="color: #ff00ff;">:</span>
<span style="color: #000000;">		</span><span style="font-weight: bold;color: #000000;">return</span><span style="color: #000000;"> </span><span style="color: #008000;">self</span><span style="color: #000000;">.beautifier</span><span style="color: #ff00ff;">(</span><span style="color: #000000;"> </span><span style="color: #dd0000;">" '"</span><span style="color: #ff00ff;">+</span><span style="color: #000000;">phraseRemaniee</span><span style="color: #ff00ff;">+</span><span style="color: #dd0000;">"' ?"</span><span style="color: #ff00ff;">)</span>

<span style="color: #000000;">        </span>
<span style="color: #000000;">        </span>
<span style="font-style: italic;color: #808080;">#f = FrenchLinguist()  </span>
<span style="font-style: italic;color: #808080;">#print f.imprime("qsdf le Ã©ee")</span>
<span style="font-style: italic;color: #808080;">#print f.decontracte("j'adore j'Ã©vite j'y vais")</span>
<span style="font-style: italic;color: #808080;">#print "qsdf"</span>
</pre></body>
</html>
